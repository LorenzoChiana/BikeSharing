<!doctype html>
<html lang="en">
<head>
<title>View Component</title>
<meta charset="utf-8">
</head>
<style>
agm-map {
  width: 100%;
  height: 50vh;
}

/* css mappa */
#mapView {
  margin-top: 2%;
  margin-bottom: 2%;

  padding-top: 2%;
  padding-bottom: 2%;
}

/* Nav Meu Container */
@media (max-width: 991px) {
  .nav-menu-container {
    display: none;
  /*  text-align: left; */
    }
  }

  mat-toolbar, mat-toolbar-row, mat-sidenav {
    background: #2c3e50;
  }
</style>

<body>

<div class="container">

  <!-- pulsanti navigazione -->
  <div class="tool-bar">
    <button (click)="goBack()">Indietro</button>
    <button (click)="rackList()">Parcheggi</button>
    <button *ngIf="!isAdmin" (click)="preleva()">Preleva</button>
    <button *ngIf="!isAdmin" (click)="rilascia()">Rilascia</button>
    <button (click)="rentList()">Prenotazioni</button>
    <button (click)="commentList()">Commenti</button>
  </div>

  <!-- titolo -->
  <div class="titolo">
    <button *ngIf="showMap" (click)="toggleMap()">Elenco</button>
    <button *ngIf="!showMap" (click)="toggleMap()">Mappa</button>
    <h1 style="color:white;">Seleziona un parcheggio</h1>
  </div>

  <!-- mappa parcheggi -->
  <div *ngIf="showMap" class="map-responsive" id="mapView">
    <img src="http://maps.google.com/mapfiles/ms/icons/blue-dot.png">
    Parcheggi bici
    <agm-map [latitude]="latitudine" [longitude]="longitudine" [zoom]="zoom" [fullscreenControl]='true' [mapTypeControl]='true'>
      <agm-marker *ngFor="let rack of rackes; let ind = index"
      [label]="rack.codice" [latitude]="rack.latitudine" [longitude]="rack.longitudine"

      (dragEnd)="dragRack($event, rack)"
      (markerClick)="infoRack(rack)"
      color="white"
      [iconUrl]="'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'">
    </agm-marker>
    </agm-map>
  </div>

  <!-- elenco parcheggi -->
  <div class="table-container" style="overflow: auto;">
    <table class="table table-hover">
      <thead>
        <tr>
          <td>Id</td>
          <td>Codice</td>
          <td>Indirizzo</td>
          <td>N. Bici</td>
          <td>N. Posti</td>

          <td *ngIf="isAdmin">Edit</td>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let rack of rackes;let ind = index" (click)="selectRack(rack)">

          <td>{{ind + 1}}</td>
          <td>{{rack.codice}}</td>
          <td>{{rack.indirizzo}}</td>
          <td>{{rack.numBike}}</td>
          <td>{{rack.numPlace}}</td>

          <td *ngIf="isAdmin">
            <button type="button" class="btn btn-primary btn-sm" (click)="editRack(rack)">Edit</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div> <!-- end elenco -->

</div> <!-- end div content -->

</body>
</html>
