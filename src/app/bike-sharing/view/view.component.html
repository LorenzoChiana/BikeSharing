<mat-accordion class="example-headers-align">

  <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Mappa
      </mat-panel-title>
      <mat-panel-description>
        Seleziona attraverso la mappa
        <mat-icon>map</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <div *ngIf="showMap" class="map-responsive" id="mapView">
      <img src="http://maps.google.com/mapfiles/ms/icons/blue-dot.png">
      Parcheggi bici
      <agm-map [latitude]="latitudine" [longitude]="longitudine" [zoom]="zoom" [fullscreenControl]='true' [mapTypeControl]='true'>
        <agm-marker *ngFor="let rack of rackes; let ind = index"
        [label]="rack.codice" [latitude]="rack.latitudine" [longitude]="rack.longitudine"
        [markerDraggable]="isAdmin"
        (dragEnd)="dragRack($event, rack)"
        (markerClick)="infoRack(rack)"
        color="white"
        [iconUrl]="'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'">
      </agm-marker>
      </agm-map>
    </div>

    <mat-action-row>
      <!--<button (click)="goBack()">Indietro</button>-->
      <button mat-button (click)="rackList()">Parcheggi</button>
      <button mat-button *ngIf="!isAdmin" (click)="preleva()">Preleva</button>
      <button mat-button *ngIf="!isAdmin" (click)="rilascia()">Rilascia</button>
      <button mat-button (click)="rentList()">Prenotazioni</button>
      <button mat-button (click)="commentList()">Commenti</button>
    </mat-action-row>
  </mat-expansion-panel>

  <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Elenco
      </mat-panel-title>
      <mat-panel-description>
        Seleziona attraverso l'elenco
        <mat-icon>list</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>
    <div class="table-container">
    
      <table class="table table-hover">
        <thead>
          <tr>
            <td>Id</td>
            <td>Codice</td>
            <td>Indirizzo</td>
            <td>N. Bici</td>
            <td>N. Posti</td>

            <td *ngIf="isAdmin">Edit</td>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let rack of rackes;let ind = index" (click)="selectRack(rack)">

            <td>{{ind + 1}}</td>
            <td>{{rack.codice}}</td>
            <td>{{rack.indirizzo}}</td>
            <td>{{rack.numBike}}</td>
            <td>{{rack.numPlace}}</td>

            <td *ngIf="isAdmin">
              <button type="button" class="btn btn-primary btn-sm" (click)="editRack(rack)">Edit</button>
            </td>
          </tr>
        </tbody>
      </table>
     </div>
    <mat-action-row>
      <button mat-button (click)="rackList()">Parcheggi</button>
      <button mat-button *ngIf="!isAdmin" (click)="preleva()">Preleva</button>
      <button mat-button *ngIf="!isAdmin" (click)="rilascia()">Rilascia</button>
      <button mat-button (click)="rentList()">Prenotazioni</button>
      <button mat-button (click)="commentList()">Commenti</button>
    </mat-action-row>
  </mat-expansion-panel>

</mat-accordion>
